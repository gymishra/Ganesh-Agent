{
  "service_info": {
    "name": "SAP API_SALES_ORDER_SRV",
    "description": "SAP S/4HANA Sales Order Management API",
    "url": "https://vhcals4hci.awspoc.club/sap/opu/odata/sap/API_SALES_ORDER_SRV/",
    "metadata_url": "https://vhcals4hci.awspoc.club/sap/opu/odata/sap/API_SALES_ORDER_SRV/$metadata",
    "system_info": {
      "sap_system": "S4H",
      "sap_client": "100",
      "authentication": "Basic",
      "system_type": "SAP S/4HANA"
    },
    "status": "Ready for testing with correct credentials"
  },
  "mcp_configuration": {
    "working_example": {
      "description": "This is how to use the MCP server once you have working credentials",
      "command": "/home/gyanmis/bin/odata-mcp",
      "test_command": "odata-mcp --trace --service 'https://vhcals4hci.awspoc.club/sap/opu/odata/sap/API_SALES_ORDER_SRV/' --user 'YOUR_WORKING_USERNAME' --password 'YOUR_WORKING_PASSWORD' --tool-shrink --read-only --max-items 20",
      "production_args": [
        "--service", "https://vhcals4hci.awspoc.club/sap/opu/odata/sap/API_SALES_ORDER_SRV/",
        "--user", "${SAP_USERNAME}",
        "--password", "${SAP_PASSWORD}",
        "--tool-shrink",
        "--read-only",
        "--max-items", "50",
        "--legacy-dates"
      ]
    }
  },
  "expected_entities": {
    "description": "Based on SAP API_SALES_ORDER_SRV standard entities",
    "entities": [
      {
        "name": "A_SalesOrder",
        "description": "Sales Order Header data",
        "key_fields": ["SalesOrder"],
        "important_fields": [
          "SalesOrder",
          "SalesOrderType", 
          "SoldToParty",
          "CreationDate",
          "TotalNetAmount",
          "TransactionCurrency",
          "OverallSDProcessStatus"
        ]
      },
      {
        "name": "A_SalesOrderItem",
        "description": "Sales Order Line Items",
        "key_fields": ["SalesOrder", "SalesOrderItem"],
        "important_fields": [
          "SalesOrder",
          "SalesOrderItem",
          "Material",
          "RequestedQuantity",
          "RequestedQuantityUnit",
          "NetAmount",
          "TransactionCurrency"
        ]
      },
      {
        "name": "A_SalesOrderHeaderPartner",
        "description": "Sales Order Partners (Customer, Ship-to, etc.)",
        "key_fields": ["SalesOrder", "PartnerFunction"],
        "important_fields": [
          "SalesOrder",
          "PartnerFunction",
          "Customer",
          "Supplier"
        ]
      },
      {
        "name": "A_SalesOrderScheduleLine",
        "description": "Delivery Schedule Lines",
        "key_fields": ["SalesOrder", "SalesOrderItem", "ScheduleLine"],
        "important_fields": [
          "SalesOrder",
          "SalesOrderItem", 
          "ScheduleLine",
          "RequestedDeliveryDate",
          "ConfirmedDeliveryDate",
          "OrderQuantity"
        ]
      }
    ]
  },
  "sample_mcp_tools": {
    "description": "These are the MCP tools that would be generated",
    "tools": [
      {
        "name": "filter_A_SalesOrder_for_APISALESORDERSRV",
        "description": "Search and filter sales orders",
        "example_usage": {
          "$filter": "SalesOrder eq '0000000001'",
          "$select": "SalesOrder,SoldToParty,TotalNetAmount,CreationDate",
          "$expand": "to_Item,to_Partner"
        }
      },
      {
        "name": "get_A_SalesOrder_for_APISALESORDERSRV", 
        "description": "Get specific sales order by key",
        "example_usage": {
          "SalesOrder": "0000000001",
          "$expand": "to_Item"
        }
      },
      {
        "name": "filter_A_SalesOrderItem_for_APISALESORDERSRV",
        "description": "Search and filter sales order items",
        "example_usage": {
          "$filter": "SalesOrder eq '0000000001'",
          "$select": "SalesOrder,SalesOrderItem,Material,RequestedQuantity"
        }
      }
    ]
  },
  "integration_with_ai_classifier": {
    "description": "How this integrates with your OData AI Classifier project",
    "workflow": [
      "1. User asks: 'Show me sales order 0000000001'",
      "2. Your AI classifier identifies this needs the Sales Order service",
      "3. AI classifier calls MCP server with appropriate tool",
      "4. MCP server executes OData query",
      "5. Results are returned and formatted for user"
    ],
    "example_python_integration": {
      "code": "# In your AI classifier\nimport subprocess\nimport json\n\ndef query_sales_order(order_number):\n    cmd = [\n        '/home/gyanmis/bin/odata-mcp',\n        '--service', 'https://vhcals4hci.awspoc.club/sap/opu/odata/sap/API_SALES_ORDER_SRV/',\n        '--user', os.environ['SAP_USERNAME'],\n        '--password', os.environ['SAP_PASSWORD'],\n        '--tool-shrink',\n        '--read-only'\n    ]\n    \n    # This would execute the appropriate MCP tool\n    # filter_A_SalesOrder_for_APISALESORDERSRV\n    # with parameters: {'$filter': f\"SalesOrder eq '{order_number}'\"}\n    \n    return execute_mcp_tool(cmd, 'filter_A_SalesOrder', {'$filter': f\"SalesOrder eq '{order_number}'\"})"
    }
  },
  "troubleshooting": {
    "credential_issues": [
      "1. Verify username and password with SAP administrator",
      "2. Check if user has OData service permissions",
      "3. Try different username formats: 'user', 'user@client', 'DOMAIN\\user'",
      "4. Ensure user is not locked in SAP system",
      "5. Check if system requires specific SAP client parameter"
    ],
    "common_solutions": [
      "1. Contact SAP system administrator for correct credentials",
      "2. Request OData service permissions for your user",
      "3. Try accessing SAP GUI first to verify credentials work",
      "4. Check if VPN or network access is required"
    ]
  },
  "next_steps": [
    "1. Get working SAP credentials from system administrator",
    "2. Test credentials with: curl -u 'username:password' 'https://vhcals4hci.awspoc.club/sap/opu/odata/sap/API_SALES_ORDER_SRV/$metadata'",
    "3. Once credentials work, run: odata-mcp --trace --service 'https://vhcals4hci.awspoc.club/sap/opu/odata/sap/API_SALES_ORDER_SRV/' --user 'username' --password 'password'",
    "4. Integrate with your AI classifier project",
    "5. Test with real sales order data"
  ]
}
